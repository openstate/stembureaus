{% with messages = get_flashed_messages(with_categories=True) %}
{% if messages %}
{% set number_of_errors = messages | map(attribute=0) | select('equalto', 'error') | list | length %}
{% set list_class = 'error' if number_of_errors > 0 else '' %}
<ul class="action-bar block-padding {{ list_class }}">
    {% for category, message in messages %}
    <li class="{{ category }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}
